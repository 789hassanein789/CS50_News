{% load static %}
{% load socialaccount %}
{% load change %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="{% static 'CS50_News/bootstrap.min.css' %}" rel="stylesheet">    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pirata+One&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a8cedb277e.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'CS50_News/style.css' %}">
    <link rel="stylesheet" href="{% static 'CS50_News/index.css' %}">
    <link rel="stylesheet" href="{% static 'CS50_News/footer.css' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'CS50_News/bundles/favicon_io/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'CS50_News/bundles/favicon_io/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'CS50_News/bundles/favicon_io/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'CS50_News/bundles/favicon_io/site.webmanifest' %}">
    <meta name="google-signin-client_id" content="247133284916-r5pu7h3bnee0vbrbem7nhph5ffhkk5ob.apps.googleusercontent.com">
    
    {% block head %}
    {% endblock %}
    <title>CS50 News</title>
</head>
<body id="body">
    <header>
        <div id="main-header">
            <div class="main-header_search d-none">
                <form action="{% url 'search' %}" class="min-search-form">
                    <div class="input-group">
                        <button class="btn btn-outline-secondary search-button" type="submit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-search" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                            </svg>
                        </button>
                        <input type="text" class="form-control" name="q" placeholder="search" autocomplete="off">
                    </div>
                </form>
                <div class="icon-div">
                    <button class="icon-btn" id="backBtn">
                        <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <div id="main-header_content">
                <a class="navbar-brand" id="brand" href="{% url 'index' %}" style="font-family: 'Pirata One', system-ui;">CS50 News</a>
                <div id="navbar-content">
                    {% if user.is_staff %}
                        <div class="icon-div" id="admin-div">
                            <a class="icon-btn" href="{% url 'staff' %}">
                                <i class="fa-solid fa-user-tie"></i>                    
                            </a>
                        </div>
                    {% endif %}
                    <div class="icon-div" id="toggle-div">
                        <button class="icon-btn" id="toggle-button">
                            <i class="fa-solid fa-circle-half-stroke fa-rotate-180"></i>
                        </button>
                    </div>
                    <div class="icon-div" id="min-search-btn">
                        <button class="icon-btn">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                    </div>
                    <form action="{% url 'search' %}" method="get" id="navbar-form">
                        <div class="input-group">
                            <input type="text" class="form-control" name="q" placeholder="search" autocomplete="off">
                            <button class="btn btn-outline-secondary search-button" type="submit">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-search" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                </svg>
                            </button>
                        </div>
                    </form>
                    <div class="icon-div">
                        <button class="icon-btn" id="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                           <i class="fa-solid fa-bars fa-xl"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <nav id="navbar">
            <ul id="navbar-ul">
                <a class="nav-link" href="{% url 'index' %}"><li class="p-2" data-target="Home" id="nav-Home">Home</li></a>
                <a class="nav-link" href="{% url 'cat_index' cat='News' %}"><li class="p-2" data-target="News" id="nav-News">News</li></a>
                <a class="nav-link" href="{% url 'cat_index' cat='Sport' %}"><li class="p-2" data-target="Sport"  id="nav-Sport">Sport</li></a>
                <a class="nav-link" href="{% url 'cat_index' cat='Business' %}"><li class="p-2" data-target="Business" id="nav-Business">Business</li></a>
                <a class="nav-link" href="{% url 'cat_index' cat='Innovation' %}"><li class="p-2" data-target="Innovation" id="nav-Innovation">Innovation</li></a>
                <a class="nav-link" href="{% url 'cat_index' cat='Culture' %}"><li class="p-2" data-target="Culture" id="nav-Culture">Culture</li></a>
                <a class="nav-link" href="{% url 'cat_index' cat='Travel' %}"><li class="p-2" data-target="Travel" id="nav-Travel">Travel</li></a>
                <a class="nav-link" href="{% url 'cat_index' cat='Earth' %}"><li class="p-2" data-target="Earth" id="nav-Earth">Earth</li></a>
            </ul>
        </nav>
    </header>
    {% if subs %}
        <nav id="sub_nav">
            {% for key, value in subs.items %}
                <a href="{% url 'cat_index' cat=parent sub=value %}" class="nav-link">
                    <li class="list-group-item" data-target="{{value}}"  id="sub-nav-{{value}}" >{{ value|change:"_ " }}</li>
                </a>
            {% endfor %}
        </nav>
    {% endif %}
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header">
            <button type="button" class="btn-close close-offcanvas" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="list-group list-group-flush">
                <a href="{% url 'index' %}" class="nav-link">
                    <li class="list-group-item" data-target="Home" id="Home-category">Home</li>
                </a>
                <li class="list-group-item main-section-item" data-section-name="News" id="News-category">
                    <div class="drop-down-div">
                        <button class="main-section-button">News</button>
                        <button class="main-section-button">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                </li>
                <li class="list-group-item drop-down-item d-none">
                    <ul class="list-group list-group-flush">
                        <a href="{% url 'cat_index' cat='News' %}" class="nav-link">
                            <li class="list-group-item" data-target="News" id="News">News</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Israil-Gaza_war'%}" class="nav-link">
                            <li class="list-group-item" data-target="Israil-Gaza_war" id="Israil-Gaza_war">Israel-Gaza war</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Ukraine-Russia_war' %}" class="nav-link">
                            <li class="list-group-item" data-target="Ukraine-Russia_war" id="Ukraine-Russia_war">Ukraine-Russia war</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Iraq' %}" class="nav-link">
                            <li class="list-group-item" data-target="Iraq" id="Iraq">Iraq</li>
                        </a>
                        <a href="{% url 'cat_index' cat='US_&_Canada' %}" class="nav-link">
                            <li class="list-group-item" data-target="US_&_Canada" id="US_&_Canada">US & Canada</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Middle_East' %}" class="nav-link">
                            <li class="list-group-item" data-target="Middle_East" id="Middle_East">Middle East</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Europe' %}" class="nav-link">
                            <li class="list-group-item" data-target="Europe" id="Europe">Europe</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Asia' %}" class="nav-link">
                            <li class="list-group-item" data-target="Asia" id="Asia">Asia</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Africa' %}" class="nav-link">
                            <li class="list-group-item" data-target="Africa" id="Africa">Africa</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Australia' %}" class="nav-link">
                            <li class="list-group-item" data-target="Australia" id="Australia">Australia</li>
                        </a>
                        <a href="{% url 'cat_index' cat='Latine_America' %}" class="nav-link">
                            <li class="list-group-item" data-target="Latine_America" id="Latine_America">Latine America</li>
                        </a>
                    </ul>
                </li>
                <li class="list-group-item main-section-item" data-section-name="Sport" id="Sport-category">
                    <div class="drop-down-div">
                        <button class="main-section-button">Sport</button>
                        <button class="main-section-button">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                </li>
                <li class="list-group-item drop-down-item d-none">
                    <ul class="list-group list-group-flush">
                        <a class="nav-link" href="{% url 'cat_index' cat='Sport' %}">
                            <li class="list-group-item" data-target="Sport" id="Sport">Sport</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Martial_Arts' %}">
                            <li class="list-group-item" data-target="Martial_Arts" id="Martial_Arts">Martial arts</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Football' %}">
                            <li class="list-group-item" data-target="Football" id="Football">Football</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Cricket' %}">
                            <li class="list-group-item" data-target="Cricket" id="Cricket">Cricket</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Formula_1' %}">
                            <li class="list-group-item" data-target="Formula_1" id="Formula_1">Formula 1</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Tennis' %}">
                            <li class="list-group-item" data-target="Tennis" id="Tennis">Tennis</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Golf' %}">
                            <li class="list-group-item" data-target="Golf" id="Golf">Golf</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Athletics' %}">
                            <li class="list-group-item" data-target="Athletics" id="Athletics">Athletics</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Cycling' %}">
                            <li class="list-group-item" data-target="Cycling" id="Cycling">Cycling</li>
                        </a>
                    </ul>
                </li>
                <a href="{% url 'cat_index' cat='Business' %}" class="nav-link">
                    <li class="list-group-item" data-target="Business" id="Business-category">Business</li>
                </a>
                <li class="list-group-item main-section-item" data-section-name="Innovation" id="Innovation-category">
                    <div class="drop-down-div">
                        <button class="main-section-button">Innovation</button>
                        <button class="main-section-button">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                </li>
                <li class="list-group-item drop-down-item d-none">
                    <ul class="list-group list-group-flush">
                        <a class="nav-link" href="{% url 'cat_index' cat='Innovation' %}">
                            <li class="list-group-item" data-target="Innovation" id="Innovation">Innovation</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Technology' %}">
                            <li class="list-group-item" data-target="Technology" id="Technology">Technology</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Science_&_Health' %}">
                            <li class="list-group-item" data-target="Science_&_Health" id="Science_&_Health">Science_&_Health</li>
                        </a>
                    </ul>
                </li>
                <li class="list-group-item main-section-item" data-section-name="Culture" id="Culture-category">
                    <div class="drop-down-div">
                        <button class="main-section-button">Culture</button>
                        <button class="main-section-button">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                </li>
                <li class="list-group-item drop-down-item d-none">
                    <ul class="list-group list-group-flush">
                        <a class="nav-link" href="{% url 'cat_index' cat='Culture' %}">
                            <li class="list-group-item" data-target="Culture" id="Culture">Culture</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Books' %}">
                            <li class="list-group-item" data-target="Books" id="Books">Books</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Style' %}">
                            <li class="list-group-item" data-target="Style" id="Style">Style</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Film_&_TV' %}">
                            <li class="list-group-item" data-target="Film_&_TV" id="Film_&_TV">Film & TV</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Music' %}">
                            <li class="list-group-item" data-target="Music" id="Music">Music</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Art_&_Design' %}">
                            <li class="list-group-item" data-target="Art_&_Design" id="Art_&_Design">Art & Design</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Entertainment' %}">
                            <li class="list-group-item" data-target="Entertainment" id="Entertainment">Entertainment</li>
                        </a>
                        
                        
                    </ul>
                </li>
                <li class="list-group-item main-section-item" data-section-name="Travel" id="Travel-category">
                    <div class="drop-down-div">
                        <button class="main-section-button">Travel</button>
                        <button class="main-section-button">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                </li>
                <li class="list-group-item drop-down-item d-none">
                    <ul class="list-group list-group-flush">
                        <a class="nav-link" href="{% url 'cat_index' cat='Travel' %}">
                            <li class="list-group-item" data-target="Travel" id="Travel">Travel</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Destinations' %}">
                            <li class="list-group-item" data-target="Destinations" id="Destinations">Destinations</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Food_&_Drink' %}">
                            <li class="list-group-item" data-target="Food_&_Drink" id="Food_&_Drink">Food_&_Drink</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Adventures' %}">
                            <li class="list-group-item" data-target="Adventures" id="Adventures">Adventures</li>
                        </a>
                    </ul>
                </li>
                <li class="list-group-item main-section-item" data-section-name="Earth" id="Earth-category">
                    <div class="drop-down-div">
                        <button class="main-section-button">Earth</button>
                        <button class="main-section-button">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                </li>
                <li class="list-group-item drop-down-item d-none">
                    <ul class="list-group list-group-flush">
                        <a class="nav-link" href="{% url 'cat_index' cat='Earth' %}">
                            <li class="list-group-item" data-target="Earth" id="Earth">Earth</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Natural_Wonders' %}">
                            <li class="list-group-item" data-target="Natural_Wonders" id="Natural_Wonders">Natural_Wonders</li>
                        </a>
                        <a class="nav-link" href="{% url 'cat_index' cat='Weather_&_Climate' %}">
                            <li class="list-group-item" data-target="Weather_&_Climate" id="Weather_&_Climate">Weather & Climate</li>
                        </a>
                    </ul>
                </li>
            </ul>
            {% if user.is_authenticated %}
                <div class="d-flex" id="account-btns">
                    <div class="account-drop-down flex-column">
                        <button class="a-dp-btn" id="a-dp-btn">
                            <i class="fa-solid fa-user fa-lg"></i>
                            Your Account
                        </button>
                        <div class="a-dp-content d-none">
                            {% if request.user.has_usable_password %}
                                <button class="a-dp-btn setting-btn" id="setting-btn">
                                    <i class="fa-solid fa-gear fa-lg"></i>
                                    Settings
                                </button>
                            {% else %}
                                <form action="{% provider_login_url 'google' process='connect' action='reauthenticate' method='POST' next='/auth?auth=settings' %}" method="post" id="social-reauthenticate-form">
                                    {% csrf_token %}
                                    <button class="a-dp-btn">
                                        <i class="fa-solid fa-gear fa-lg"></i>
                                        Settings
                                    </button>
                                </form>
                            {% endif %}
                            <form id="logout-form">
                                <button class="a-dp-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"/>
                                        <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"/>
                                    </svg>
                                    Sign out
                                </button>
                            </form>
                            
                        </div>
                    </div>
                    {% if user.is_staff %}
                        <div class="mt-3">
                            <a class="a-dp-btn" href="{% url 'staff' %}">
                                <i class="fa-solid fa-user-tie fa-lg"></i>
                                admin page                    
                            </a>
                        </div>
                    {% endif %}
                </div>
            {% else %}
                <div class="account-div">
                    <form class="account-form">
                        <button type="button" class="account-btn signin-btn" onclick="show('login'); settings()">log in</button>
                    </form>
                    <form class="account-form">
                        <button type="button" class="account-btn signup-btn" onclick="show('signup'); settings()">sign up</button>
                    </form>
                </div>    
            {% endif %}
        </div>
    </div>
    <div class="body-content">
    {% block body %}
    {% endblock %}
    </div>
    <div class="overlay d-none">
        <div class="popup">
            {% if user.is_authenticated %}
                <div class="popup-block d-none" id="validation-block">
                    <form class="popup-form" id="validation-form" data-state="validate"  method="post">
                        <button type="button" class="btn-close setting-btn" aria-label="Close"></button>
                        <p class="popup-brand">CS50 News</p>
                        <p class="fs-4 fw-bold m-0">Enter your password to continue</p>
                        <p class="m-0">Please re-enter the password you used to sign in.</p>
                        <div class="popup-input-div">
                            <input type="password" name="password" class="popup-input" autocomplete="off" placeholder="" id="validation-password">
                            <label for="validation-password" class="popup-label">Password</label>
                        </div>
                        <p class="error-p d-none" id="validation-password-error-p">
                            The password is incorrect. Reminder: passwords are case sensitive.
                        </p>
                        <button class="popup-btn continue-btn">
                            Continue
                        </button>
                    </form>
                </div>
                <div class="popup-block d-none" id="settings-block">
                    <form class="popup-form" method="post" id="settings-form" onsubmit="event.preventDefault(); accountEdit()">
                        <button type="button" class="btn-close setting-btn" aria-label="Close"></button>
                        <p class="popup-brand">CS50 News</p>
                        <div class="g-0">
                            <p class="fs-4 fw-bold m-0">Account Info</p>
                            <div class="ai-input" id="email" data-email={{user.email}}>
                                <div class="field">
                                    <div class="field_title">Email</div>
                                    <div class="fw-bold">{{user.email}}</div>
                                </div>
                                <button class="icon-btn" type="button">
                                    <i class="fa-solid fa-chevron-right fa-lg"></i>
                                </button>
                            </div>
                            <div class="ai-input" id="password" data-email={{user.email}}>
                                <div class="field">
                                    <div class="field_title">Password</div>
                                    <div class="fw-bold">**********</div>
                                    <input type="hidden" value="" name="new-password" id="hidden-password">
                                </div>
                                <button class="icon-btn" type="button">
                                    <i class="fa-solid fa-chevron-right fa-lg"></i>
                                </button>
                            </div>
                        </div>
                        <p class="fs-4 fw-bold m-0">Personal Info</p>
                        <div class="popup-input-div">
                            <input type="text" name="username" class="popup-input" autocomplete="off" placeholder="" id="username" value="{{user.username}}">
                            <label for="username" class="popup-label">Username</label>
                        </div>
                        <p class="error-p d-none" id="username-error"></p>
                        <button class="popup-btn done-btn">
                            Done
                        </button>
                        <p class="fs-4 fw-bold m-0">Delete Account</p>
                        <p class="min-font">By deleting your account, you may be unable to access certain CS50 News services.</p>
                        <a class="focus-link" id="delete-link">Delete Account</a>
                        <p class="min-font">CS50 News treats this information with care and respect. For details, review our <a href="" class="focus-link min-font">Privacy Policy.</a></p>
                    </form>
                </div>
                <div class="popup-block d-none" id="delete-block">
                    <form action="{% url 'delete' %}" method="post" class="popup-form">
                        <button class="icon-btn back-btn" type="button">
                            <i class="fa-solid fa-arrow-right fa-xl"></i>
                        </button>
                        {% csrf_token %}
                        <p class="fs-4 fw-bold m-0">Are you sure?</p>
                        <p>By deleting your account, you will no longer be able to log in to websites, mobile apps, or other online services, and you will not be able to use your account to access any associated purchases, credits, points, rewards, plans, content or other benefits you may have associated with it.</p>
                        <button class="popup-btn" id="delete-btn">
                            Yes, delete this account
                        </button>
                        <button class="popup-btn" id="back-btn" type="button">
                            No, I'll keep it
                        </button>
                        {% if error %}
                            <p class="error-p">{{error}}</p>
                        {% endif %}
                    </form>
                </div>
                <div class="popup-block d-none" id="password-block">
                    <form method="post" class="popup-form">
                        <button class="icon-btn back-btn" type="button">
                            <i class="fa-solid fa-arrow-right fa-xl"></i>
                        </button>
                        {% csrf_token %}
                        {% if request.user.has_usable_password %}
                            <p class="fs-4 fw-bold">Please enter the current & new password</p>
                            <p>Enter your account password and the new password you would like to use.</p>
                            <div class="popup-input-div">
                                <input type="password" name="current-password" class="popup-input" autocomplete="off" placeholder="" id="current-password" value="">
                                <label for="current-password" class="popup-label">Current Password</label>
                            </div>
                            <p class="error-p d-none" id="current_password"></p>
                            <div class="popup-input-div">
                                <input type="password" name="new-password" class="popup-input" autocomplete="off" placeholder="" id="new-password" value="">
                                <label for="new-password" class="popup-label">New Password</label>
                            </div>
                        {% else %}
                            <p class="fs-4 fw-bold">Please enter the new password.</p>
                            <p>Please enter the new password you would like to set as your account password</p>
                            <div class="popup-input-div">
                                <input type="password" name="password" class="popup-input" autocomplete="off" placeholder="" id="new-password" value="">
                                <label for="new-password" class="popup-label">Password</label>
                            </div>
                        {% endif %}
                        <p class="error-p d-none" id="new_password">The password you entered is incorrect, please try again</p>
                        <button class="popup-btn done-btn">
                            Done
                        </button>
                    </form>
                </div>
                <div class="popup-block d-none" id="email-block">
                    <form method="post" class="popup-form">
                        <button class="icon-btn back-btn" type="button">
                            <i class="fa-solid fa-arrow-right fa-xl"></i>
                        </button>
                        {% csrf_token %}
                        <p class="fs-4 fw-bold">Please enter the new email.</p>
                        <p>Please enter the email you would like to use as your account email</p>
                        <div class="popup-input-div">
                            <input type="email" name="email" class="popup-input" autocomplete="off" placeholder="" id="new-email" value="">
                            <label for="new-email" class="popup-label">Email</label>
                        </div>
                        <p class="error-p d-none">The email you entered is incorrect, please try again</p>
                        <button class="popup-btn done-btn">
                            Done
                        </button>
                    </form>
                </div>
            {% else %}
                <div class="popup-block d-none" id="login-block">
                    <form class="popup-form" method="post" id="login-form">
                        <button type="button" class="btn-close setting-btn" aria-label="Close"></button>
                        <p class="popup-brand">CS50 News</a>
                        <p class="fs-4 fw-bold m-0">log in</p>
                        <p class="error-p d-none" id="conflict-login">the user is allready loged in, try to refresh the page</p>
                        <div class="popup-input-div">
                            <input type="email" name="email-login" class="popup-input login-input" autocomplete="off" placeholder="" id="email-login-input">
                            <label for="email-login-input" class="popup-label">email</label>
                        </div>
                        <p class="error-p d-none" id="email-login-input-error-p">please enter your email</p>
                        <div class="popup-input-div">
                            <input type="password" name="password-login" class="popup-input login-input" autocomplete="off" placeholder="" id="password-login-input">
                            <label for="password-login-input" class="popup-label">password</label>
                        </div>
                        <p class="error-p d-none" id="password-login-input-error-p">please enter your password</p>
                        <button class="popup-btn continue-btn">
                            Continue
                        </button>
                    </form>
                    <div class="mb-3">
                        <div class="separator-div">
                            <span class="separator"></span>
                            <span class="or-separator">OR</span>
                            <span class="separator"></span>
                        </div>
                        <div class="socialaccount-div w-100">
                            <form action="{% provider_login_url 'google' method='POST' %}" method="post">
                                {% csrf_token %}
                                <button class="social-login Google-login">
                                    <span class="G-logo"></span>
                                    <span>continue with Google</span>
                                </button>
                            </form>
                            <form action="{% provider_login_url 'github' method='POST' %}" method="post"> 
                                {% csrf_token %}
                                <button class="social-login Github-login">
                                    <span class="Cat-logo social-login-logo">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="880" width="1320" viewBox="-6.39108 -10.38875 55.38936 62.3325">
                                            <g fill="#fff">
                                                <path d="M21.3035 0C9.5395 0 0 9.5373 0 21.3035c0 9.4122 6.1041 17.3976 14.5687 20.2146 1.0646.1972 1.4555-.4622 1.4555-1.0249 0-.5076-.0198-2.1861-.0289-3.9662-5.9266 1.2887-7.1772-2.5136-7.1772-2.5136-.9691-2.462-2.3654-3.1171-2.3654-3.1171-1.9329-1.3222.1457-1.295.1457-1.295 2.1392.1502 3.2656 2.1956 3.2656 2.1956 1.9001 3.2565 4.9837 2.315 6.1994 1.7706.1916-1.3765.7433-2.3167 1.3526-2.8487-4.7319-.5383-9.706-2.3653-9.706-10.5283 0-2.3255.8322-4.2259 2.195-5.7178-.2212-.537-.9504-2.7037.2067-5.638 0 0 1.789-.5723 5.8596 2.184 1.6994-.472 3.5218-.7088 5.3323-.7172 1.8104.008 3.6343.2451 5.3368.7172 4.0661-2.7563 5.8526-2.184 5.8526-2.184 1.1596 2.9343.4304 5.101.2092 5.638 1.366 1.4919 2.1921 3.3923 2.1921 5.7178 0 8.1827-4.9837 9.984-9.7275 10.5114.7642.6611 1.445 1.9576 1.445 3.9451 0 2.8505-.0243 5.1446-.0243 5.8462 0 .5673.3831 1.2316 1.463 1.0224 8.4603-2.8201 14.5566-10.8028 14.5566-20.212C42.6071 9.5372 33.0691 0 21.3036 0" fill-rule="evenodd"/>
                                                <path d="M8.0689 30.587c-.047.1061-.2135.1379-.3651.0649-.155-.0695-.2413-.2138-.1913-.32.046-.1087.2124-.139.367-.0663.1545.0695.2426.2152.1894.3214m.863.9625c-.1016.0942-.3006.0504-.435-.0984-.1397-.1485-.1655-.3475-.0624-.4427.1048-.0942.2974-.0501.4367.0984.1397.1503.1669.3475.0607.4427m.8399 1.2268c-.1305.091-.3443.006-.4763-.1834-.1305-.1898-.1305-.417.003-.508.132-.091.3426-.009.4763.1788.1302.1926.1302.4198-.003.5126m1.1506 1.1855c-.1167.1287-.3654.0942-.5475-.0815-.1862-.1718-.238-.4156-.1213-.5444.1185-.129.3686-.0928.552.0815.185.1715.241.417.1168.5444m1.5876.6882c-.052.167-.291.2424-.5324.1715-.241-.073-.3986-.268-.35-.4367.0502-.1683.2908-.247.5338-.1711.2406.0727.3987.2667.3486.4364m1.7435.1275c.006.1757-.1986.3214-.4519.3245-.2547.006-.461-.1365-.4639-.3094 0-.1774.2004-.3213.4547-.326.2533-.005.4611.1366.4611.3109m1.6223-.276c.0303.171-.1457.3471-.3972.394-.2473.0455-.4763-.0607-.5077-.2303-.0307-.1757.1482-.3517.3955-.3972.2519-.0437.4773.0593.5094.2335"/>
                                            </g>
                                        </svg>
                                    </span>
                                    <span>Log in with github</span>
                                </button>
                            </form>
                        </div>
                    </div>
                    <a class="focus-link min-font" id="reset-link">forget your password?</a>
                </div>
                <div class="popup-block d-none" id="signup-block">
                    <form class="popup-form" id="signup-form">
                        <button type="button" class="btn-close setting-btn" aria-label="Close"></button>
                        <p class="fs-4 fw-bold m-0">Create an account</p>
                        <p class="m-0">by creating an account you can log in CS50 News, access a lot of the CS50 News services and enjoy the community</p>
                        <div class="popup-input-div">
                            <input type="email" name="email" class="popup-input" autocomplete="off" placeholder="" id="email-input">
                            <label for="email-input" class="popup-label">Email</label>
                        </div>
                        <p class="error-p d-none" id="email-input-error-p">please enter your email</p>
                        <div class="popup-input-div">
                            <input type="text" name="username" class="popup-input" autocomplete="off" placeholder="" id="username-input">
                            <label for="username-input" class="popup-label">username</label>
                        </div>
                        <p class="error-p d-none" id="username-input-error-p">please enter your first name</p>
                        <div class="popup-input-div">
                            <input type="password" name="password" class="popup-input" autocomplete="off" placeholder="" id="password-input">
                            <label for="password-input" class="popup-label">Password</label>
                        </div>
                        <p class="error-p d-none" id="password-input-error-p">please enter a password</p>
                        <button class="popup-btn continue-btn signup-form-btn">
                            Agree & Continue
                        </button>
                    </form>
                    <div>
                        <div class="separator-div">
                            <span class="separator"></span>
                            <span class="or-separator">OR</span>
                            <span class="separator"></span>
                        </div>
                        <div class="socialaccount-div w-100">
                            <form action="{% provider_login_url 'google' method='POST' %}" method="post" >
                                {% csrf_token %}
                                <button class="social-login Google-login">
                                    <span class="G-logo"></span>
                                    <span>continue with Google</span>
                                </button>
                            </form>
                            <form action="{% provider_login_url 'github' method='POST' %}" method="post"> 
                                {% csrf_token %}
                                <button class="social-login Github-login">
                                    <span class="Cat-logo social-login-logo">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="880" width="1320" viewBox="-6.39108 -10.38875 55.38936 62.3325">
                                            <g fill="#fff">
                                                <path d="M21.3035 0C9.5395 0 0 9.5373 0 21.3035c0 9.4122 6.1041 17.3976 14.5687 20.2146 1.0646.1972 1.4555-.4622 1.4555-1.0249 0-.5076-.0198-2.1861-.0289-3.9662-5.9266 1.2887-7.1772-2.5136-7.1772-2.5136-.9691-2.462-2.3654-3.1171-2.3654-3.1171-1.9329-1.3222.1457-1.295.1457-1.295 2.1392.1502 3.2656 2.1956 3.2656 2.1956 1.9001 3.2565 4.9837 2.315 6.1994 1.7706.1916-1.3765.7433-2.3167 1.3526-2.8487-4.7319-.5383-9.706-2.3653-9.706-10.5283 0-2.3255.8322-4.2259 2.195-5.7178-.2212-.537-.9504-2.7037.2067-5.638 0 0 1.789-.5723 5.8596 2.184 1.6994-.472 3.5218-.7088 5.3323-.7172 1.8104.008 3.6343.2451 5.3368.7172 4.0661-2.7563 5.8526-2.184 5.8526-2.184 1.1596 2.9343.4304 5.101.2092 5.638 1.366 1.4919 2.1921 3.3923 2.1921 5.7178 0 8.1827-4.9837 9.984-9.7275 10.5114.7642.6611 1.445 1.9576 1.445 3.9451 0 2.8505-.0243 5.1446-.0243 5.8462 0 .5673.3831 1.2316 1.463 1.0224 8.4603-2.8201 14.5566-10.8028 14.5566-20.212C42.6071 9.5372 33.0691 0 21.3036 0" fill-rule="evenodd"/>
                                                <path d="M8.0689 30.587c-.047.1061-.2135.1379-.3651.0649-.155-.0695-.2413-.2138-.1913-.32.046-.1087.2124-.139.367-.0663.1545.0695.2426.2152.1894.3214m.863.9625c-.1016.0942-.3006.0504-.435-.0984-.1397-.1485-.1655-.3475-.0624-.4427.1048-.0942.2974-.0501.4367.0984.1397.1503.1669.3475.0607.4427m.8399 1.2268c-.1305.091-.3443.006-.4763-.1834-.1305-.1898-.1305-.417.003-.508.132-.091.3426-.009.4763.1788.1302.1926.1302.4198-.003.5126m1.1506 1.1855c-.1167.1287-.3654.0942-.5475-.0815-.1862-.1718-.238-.4156-.1213-.5444.1185-.129.3686-.0928.552.0815.185.1715.241.417.1168.5444m1.5876.6882c-.052.167-.291.2424-.5324.1715-.241-.073-.3986-.268-.35-.4367.0502-.1683.2908-.247.5338-.1711.2406.0727.3987.2667.3486.4364m1.7435.1275c.006.1757-.1986.3214-.4519.3245-.2547.006-.461-.1365-.4639-.3094 0-.1774.2004-.3213.4547-.326.2533-.005.4611.1366.4611.3109m1.6223-.276c.0303.171-.1457.3471-.3972.394-.2473.0455-.4763-.0607-.5077-.2303-.0307-.1757.1482-.3517.3955-.3972.2519-.0437.4773.0593.5094.2335"/>
                                            </g>
                                        </svg>
                                    </span>
                                    <span>Log in with github</span>
                                </button>
                            </form>
                            
                        </div>
                    </div>
                </div>
                <div class="popup-block d-none" id="reset-block">
                    <form class="popup-form" id="reset-form">
                        <button type="button" class="btn-close setting-btn" aria-label="Close"></button>
                        <p class="popup-brand">CS50 News</a>
                        <p class="fs-4 fw-bold m-0">Enter your email</p>
                        <p>enter the email you used to sign up and we will send you a password reset email</p>
                        <div class="popup-input-div">
                            <input type="email" name="email-reset" class="popup-input reset-input" autocomplete="off" placeholder="" id="email-reset-input">
                            <label for="email-reset-input" class="popup-label">email</label>
                        </div>
                        <p class="error-p d-none" id="email-reset-input-error-p">please enter your email</p>
                        <button class="popup-btn continue-btn">
                            continue
                        </button>
                    </form>
                </div>
                <div class="popup-block d-none" id="success-block">
                    <form class="popup-form" id="success-form">
                        <input type="hidden" id="hidden" name="email-reset">
                        <button type="button" class="btn-close setting-btn" aria-label="Close"></button>
                        <p class="popup-brand">CS50 News</a>
                        <p class="fs-4 fw-bold m-0">mail sent successfuly <i class="fa-solid fa-circle-check" style="color: #63E6BE;"></i></p>
                        <p class="success-email-message"> </p>
                        <a class="focus-link min-font" id="password-reset-link">send another mail</a>
                    </form>
                </div>
                <div class="popup-block d-none" id="new-password-block">
                    <form class="popup-form" id="new-password-form">
                        <button type="button" class="btn-close setting-btn" aria-label="Close"></button>
                        {% if key %}
                            <input type="hidden" value="{{key}}" name="key">
                        {% endif %}
                        <p class="popup-brand">CS50 News</p>
                        <div>
                            <p class="fs-4 fw-bold m-0">Password reset</p>
                            <p>please enter the new password you would like to use</p>
                        </div>
                        <div class="popup-input-div">
                            <input type="password" name="reset-password" class="popup-input" autocomplete="off" placeholder="" id="reset-password">
                            <label for="reset-password" class="popup-label">Password</label>
                        </div>
                        <p class="error-p d-none"></p>
                        <div class="popup-input-div">
                            <input type="password" name="again" class="popup-input" autocomplete="off" placeholder="" id="again">
                            <label for="again" class="popup-label">password(again)</label>
                        </div>
                        <p class="error-p d-none"></p>
                        <div class="text-div">
                            <p>the password must: </p>
                            <ul>
                                <li>contain at least 8 characters</li>
                                <li>be secure and not common</li>
                                <li>not be entirely numeric</li>
                            </ul>
                        </div>
                        <button class="popup-btn continue-btn">Reset</button>
                    </form>
                </div>
            {% endif %}
            <div class="popup-block" id="otp-block">
                <form class="popup-form">
                    <p class="fs-3 fw-bold m-0">Check your email inbox</p>
                    <p class="m-0">We'll need you to verify your email address. We’ve sent a 6-Character code to your email address. The code expires in 15 minutes. Please enter it below.</p>
                    <div>
                        <div class="otp-div">
                            <input type="tel" class="otp-input form-control" autocomplete="off" id="otp-0" autofocus>
                            <input type="tel" class="otp-input form-control" autocomplete="off" id="otp-1">
                            <input type="tel" class="otp-input form-control" autocomplete="off" id="otp-2">
                            <input type="tel" class="otp-input form-control" autocomplete="off" id="otp-3">
                            <input type="tel" class="otp-input form-control" autocomplete="off" id="otp-4">
                            <input type="tel" class="otp-input form-control" autocomplete="off" id="otp-5">
                        </div>
                    </div>
                    <p class="error-p d-none" id="otp-input-error-p"></p>
                    <button class="popup-btn continue-btn" onclick="verifyEmail()" type="button">
                        Continue
                    </button>
                    <button class="popup-btn" onclick="settings()" type="button" id="cancel-btn">
                        Cancel
                    </button>
                    <p class="m-0 min-font">Didn't receive the email? <a class="focus-link" id="resend-link">Resend</a></p>
                </form>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-column-container">
            <div class="footer-column">
                <a class="main-link">About Us</a>
                <a class="footer-link">About Us</a>
                <a class="footer-link">Terms of Use</a>
                <a class="footer-link">Privacy Policy</a>
                <a class="footer-link">Cookies</a>
                <a class="footer-link">Accessibility</a>
                <a class="footer-link">Work for CS50 News</a>
            </div>
            <div class="footer-column">
                <a class="main-link">Contact Us</a>
                <a class="footer-link">Contact CS50 News</a>
                <a class="footer-link">Contact Technical support </a>
                <a class="footer-link">Advertise with Us</a>
                <a class="footer-link">Newsletters</a>
            </div>
            <div class="footer-column last">
                <a class="main-link">Categories</a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='News' %}">
                    <li class="list-group-item" data-target="News">News</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Sport' %}">
                    <li class="list-group-item" data-target="Sport">Sport</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Business' %}">
                    <li class="list-group-item" data-target="Business">Business</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Innovation' %}">
                    <li class="list-group-item" data-target="Innovation">Innovation</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Culture' %}">
                    <li class="list-group-item" data-target="Culture">Culture</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Travel' %}">
                    <li class="list-group-item" data-target="Travel">Travel</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Earth' %}">
                    <li class="list-group-item" data-target="Earth">Earth</li>
                </a>
            </div>
            <div class="footer-column last">
                <a class="main-link nav-link" href="{% url 'cat_index' cat='News' %}">
                    <li class="list-group-item" data-target="News">News</li>
                </a>
                <a class="footer-link nav-link" herf="{% url 'cat_index' cat='Ukraine-Russia_war' %}">
                    <li class="list-group-item" data-target="Ukraine-Russia_war">Ukraine-Russia War</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Iraq' %}">
                    <li class="list-group-item" data-target="Iraq">Iraq</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='US_&_Canada' %}">
                    <li class="list-group-item" data-target="US_&_Canada">US_&_Canada</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Middle_East' %}">
                    <li class="list-group-item" data-target="Middle_East">Middle_East</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Europe' %}">
                    <li class="list-group-item" data-target="Europe">Europe</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Asia' %}">
                    <li class="list-group-item" data-target="Asia">Asia</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Africa' %}">
                    <li class="list-group-item" data-target="Africa">Africa</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='Australia' %}">
                    <li class="list-group-item" data-target="Australia">Australia</li>
                </a>
                <a class="footer-link nav-link" href="{% url 'cat_index' cat='>Latin_America' %}">
                    <li class="list-group-item" data-target="Latin_America">Latin_America</li>
                </a>
            </div>
        </div>
        <div class="footer-main">
            <div class="media">
                <div class="follow">
                    <p>Follow CS50 News on:</p>
                </div>
                <div class="icons">
                    <div>
                        <a class="link me-4" href="">
                            <i class="fa-brands fa-2x fa-facebook"></i>
                        </a>
                        <a class="link" href="">
                            <i class="fa-brands fa-2x fa-youtube"></i>
                        </a>
                    </div>
                    <div>
                        <a class="link me-4" href="">
                            <i class="fa-brands fa-2x fa-x-twitter"></i>
                        </a>
                        <a class="link" href="">
                            <i class="fa-brands fa-2x fa-telegram"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="logo">
                <a class="footer-brand" href="{% url 'index' %}" style="font-family: 'Pirata One', system-ui;">CS50 News</a>
            </div>
            <div class="Rights">
                Copyright 2024 CS50 News. All rights reserved.
            </div>
        </div>
    </footer>
    {% csrf_token %}
    <script src="{% static 'CS50_News/index.js' %}"></script>
    <script src="{% static 'CS50_News/bootstrap.bundle.min.js' %}"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
</body>
</html>